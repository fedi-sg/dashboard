<!DOCTYPE html>
<html lang="en">

<head>

  <style>
 
.nav button {
  background-color: transparent; /* Make the button background transparent */
  border: none; /* Remove borders */
  color: white; /* Set text color */
  text-align: left; /* Align text to the left */
  width: 100%; /* Full width */
  padding: 10px; /* Padding for spacing */
  text-transform: uppercase; /* Optional: if you want text uppercase */
  font-size: 1em; /* Adjust font size as needed */
  transition: background-color 0.3s; /* Transition for hover effect */
}



/* If buttons are inside an anchor <a> tag, you may need to target the anchor tag as well */
.nav a {
  background-color: transparent; /* Keep anchor background transparent */
  text-decoration: none; /* Remove underline from anchors */
}
    input[type="date"] {
      background: transparent;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 8px;
      margin: 4px;
      width: 150px;
    }
  
    /* Style adjustments for when a date has been selected */
    input[type="date"]:valid {
      background: #e8f0fe;
    }
  
    input[type="date"]:focus {
      outline: none;
      border-color: #6658f6; /* Replace with your theme color */
    }
  
    /* Firefox requires this additional pseudo-element to style the placeholder text */
    input[type="date"]::-webkit-datetime-edit-fields-wrapper {
      padding: 2px;
    }
  
    input[type="date"]::-webkit-clear-button,
    input[type="date"]::-webkit-inner-spin-button {
      display: none;
    }
  
    input[type="date"]::-webkit-calendar-picker-indicator {
      color: #2c3e50;
      opacity: 1;
    }

    :root {
      --sz: 17px; /* Adjust size to fit 60px by 34px */
      --on: #03A9F4;
      --off: rgba(118, 118, 118, 0.879);
      --transition: all 0.5s ease 0s;
    }
    
    .toggle {
      position: relative;
      width: 60px; /* Set width to 60px */
      height: 34px; /* Set height to 34px */
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    input[type="checkbox"] {
      display: none;
    }
    
    .toggle label {
      position: absolute;
      width: 60px; /* Set width to 60px */
      height: 34px; /* Set height to 34px */
      border-radius: 34px; /* Full height to make it round */
      background: var(--off);
      transition: var(--transition);
    }
    
    .toggle label:after {
      content: "";
      position: absolute;
      width: 26px; /* New thumb size */
      height: 26px; /* New thumb size */
      top: 4px; /* Adjusted for new thumb size */
      left: 4px; /* Adjusted for new thumb size */
      border-radius: 50%;
      background: white;
      transition: var(--transition);
      box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
    }
    
    input[type="checkbox"]:checked + label {
      background: var(--on);
    }
    
    input[type="checkbox"]:checked + label:after {
      left: 30px; /* Move thumb to the end for 60px width */
    }
    
  </style>
    
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="assets/img/favicon.png">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <title>
    DashPoultry
  </title>

  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <!-- Nucleo Icons -->
  <link href="assets/css/nucleo-icons.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link href="assets/css/black-dashboard.css" rel="stylesheet" />
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="assets/demo/demo.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">

</head>

<body class="" style="
    height: 300px;
    width: 1280px;
">
  <div class="wrapper">
    <!--   debut menu  -->
    <div class="sidebar" style="top: -30px; height: 85%;" >
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red"
    -->
      <div class="sidebar-wrapper">
        <div class="logo" >
          
          <a href="javascript:void(0)" class="simple-text logo-normal">
            DashPoultry
          </a>
        </div>
        <ul class="nav">
          <li class="active">
            <button class="nav-link" id="dashboardLink">
                <i class="tim-icons icon-chart-pie-36"></i>
                <p>Dashboard</p>
            </button>
          </li>
          <li>
            <button class="nav-link" id="temperatureLink">
                <i class="fas fa-thermometer-half"></i>
                <p>Temperature</p>
            </button>
          </li>

          <li>
            <button class="nav-link" id="humidityLink">
              <i class="fas fa-tint"></i> 
              <p>Humidity</p>
            </button>
          </li>
          <li>
            <button class="nav-link" id="airLink">
              <i class="fas fa-wind"></i>
              <p>Air Quality</p>
            </button>
          </li>
          
          <li>
            <button class="nav-link" id="fourrageLink">
              <i class="fas fa-seedling"></i>
              <p>Forage</p>
            </button>
          </li>
          <li>
            <button class="nav-link" id="commandLink">
                <i class="tim-icons icon-settings"></i>
                <p>Command</p>
            </button>
        </li>
          <li>
            <button class="nav-link" id="notifLink">
              <i class="tim-icons icon-bell-55"></i>
              <p>Notifications</p>
            </button>
          </li>
          <li>
            <button class="nav-link" id="userProfileLink">
<i class="tim-icons icon-single-02"></i>                <p>User Profile</p>
            </button>
          </li>
        </ul>

      </div>
    </div>
    <!-- fin menu -->


    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-absolute navbar-transparent">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle d-inline">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <a class="navbar-brand" href="javascript:void(0)">Dashboard</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="navbar-nav ml-auto">
              <li class="search-bar input-group">
                <button class="btn btn-link" id="search-button" data-toggle="modal" data-target="#searchModal"><i class="tim-icons icon-zoom-split" ></i>
                  <span class="d-lg-none d-md-block">Search</span>
                </button>
              </li>
              <li class="dropdown nav-item">
                <a href="javascript:void(0)" class="dropdown-toggle nav-link" data-toggle="dropdown">
                  <div class="notification d-none d-lg-block d-xl-block"></div>
                  <i class="tim-icons icon-sound-wave"></i>
                  <p class="d-lg-none">
                    Notifications
                  </p>
                </a>
                <ul class="dropdown-menu dropdown-menu-right dropdown-navbar">
                  <li class="nav-link"><a href="#" class="nav-item dropdown-item">Air Quality</a></li>
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item">Temperature</a></li>
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item">Humidity</a></li>
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item"> Forage</a></li>
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item">notification</a></li>
                </ul>
              </li>
              <li class="dropdown nav-item">
                <a href="index.html" class="dropdown-toggle nav-link" data-toggle="dropdown">
                  <div class="photo">
                    <img src="assets/img/anime3.png" alt="Profile Photo">
                  </div>
                  <b class="caret d-none d-lg-block d-xl-block"></b>
                  <p class="d-lg-none" >
                    Log out
                  </p>
                </a>
                <ul class="dropdown-menu dropdown-navbar">
                  <li class="nav-link"><a href="" class="nav-item dropdown-item">Profile</a></li>
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item" aria-expanded="true">Settings</a></li>
                  <li class="dropdown-divider"></li>
                  <li class="nav-link"><a href="index.html" class="nav-item dropdown-item">Log out</a></li>
                </ul>
              </li>
              <li class="separator d-lg-none"></li>
            </ul>
          </div>
        </div>
      </nav>
      <div class="modal modal-search fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="SEARCH">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <i class="tim-icons icon-simple-remove"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- End Navbar -->
      
      <!--  dashboard data  -->
      
                <!--  temperature data  -->

                <div class="content " id="temp">
                  <div class="row">
                    <div class="col-12" >
                  <div class="card card-chart">
                        <div class="card-header ">
                          <div class="row" >
                            
                            <div class="col-sm-6 text-left">
                              <h5 class="card-category">POULTRY</h5>
                              <h5 class="card-title"><h2 style="
                                width: 685px;
                            "> Settings Value <label for="" style="
                                margin-left: 50px;
                            ">history Day :<input type="date" name="" id="datetemp"></label> </h2> 
                              </h5> 
                            </div>
                            
                            <div class="col-sm-6">
                              
                              <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                                
                                <label class="btn btn-sm btn-primary btn-simple active" id="0"  >
                                  <input type="radio" name="options" checked >
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">5min</span>
                                  <span class="d-block d-sm-none">
                                    <i>5MIN</i>

                                  </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="1">
                                  <input type="radio" class="d-none d-sm-none" name="options">
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">day</span>
                                  <span class="d-block d-sm-none">
<i>1H</i>                                  </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="2">
                                  <input type="radio" class="d-none" name="options">
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">week</span>
                                  <span class="d-block d-sm-none">
                                    <i>1D</i>
                                  </span>
                                </label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- graphe 1 -->
                        <div class="card-body" style="width: 980px;">
                          
                          <!DOCTYPE html>
                          <html lang="en">
                          <head>
                              <meta charset="UTF-8">
                              <title>Sensor Dashboard</title>
                              <!-- Inclusion de Chart.js -->
                              <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                              <!-- Inclusion de JustGage et Raphaël (nécessaire pour JustGage) -->
                              <script src="https://cdn.jsdelivr.net/raphael/2.1.4/raphael-min.js"></script>
                              <script src="https://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js"></script>
                              <style>
                              
                                  .chart-container {
                                      width: 400px; /* Adjust size as needed */
                                      height: 200px; /* Adjust size as needed */
                                      margin: 0px;
                                  }
                                  /* Reste du CSS */
                              </style>
                          </head>
                          <body>
                              <div class="gauge-display" style="display: flex;">
                                  <div class="chart-container">
                                      <canvas id="temperatureChartt"></canvas>
                                  </div>
                                  <div class="chart-container">
                                      <div id="temperature--gauge"></div>
                                  </div>
                              </div>
                          <!-- temperature table -->
                          <div class="col-md-12">
                            <div class="card  card-plain">
                              <div class="card-header">
                                <h4 class="card-title"> temperature history Table</h4>
                                
                              </div>
                              <div class="card-body">
                                <div class="table-responsive">
                                  <table class="table">
                                    <thead class=" text-primary">
                                      <tr>
                                        <th>Date</th>
                                        <th>TEMPERATURE</th>
                                      </tr>
                                    </thead>
                                    <tbody id="tempHistory"></tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>


                      
                          
                          
                          
                          </body>
                          </html>





                          






                        </div>
                        <!-- end graphe 1 -->
                      </div>
                    </div>
                  </div>      
                </div>
                <!--  action -->

                <div class="content" id="command" >
                  <div class="row">
                    <div class="col-md-12">
                      <div class="card">
                        <div class="card-header">
                          <h4 class="card-title">Environmental Conditions</h4>
                        </div>
                        <div class="card-body">
                          <div class="table-responsive">
                            <table class="table tablesorter" id="">
                              <thead class="text-primary">
                                <tr>
                                  <th>Parameter</th>
                                  <th></th>
                                  <th></th>
                                  <th>Action</th>
                                </tr>
                              </thead>
                              <tbody>                                <tr>
                                <td>automatic</td>
                                <td><label class="switch"><input type="checkbox"><span class="slider round"></span></label></td>
                                <td></td>
                                <td><div class="toggle">
                                  <input type="checkbox" id="autoSwitch" />
                                  <label for="autoSwitch"></label>
                                </div>
                                </td>
                              </tr>
                              <tr>
                                <td>Lamp</td>
                                <td><label class="switch"><input type="checkbox"><span class="slider round"></span></label></td>
                                <td></td>
                                <td> <div class="toggle">
                                  <input type="checkbox" id="lampSwitch" />
                                  <label for="lampSwitch"></label>
                                </div>
                                </td>                               
                               </tr>
                               <tr>
                                <td>heater</td>
                                <td><label class="switch"><input type="checkbox"><span class="slider round"></span></label></td>
                                <td></td>
                                <td> <div class="toggle">
                                  <input type="checkbox" id="heaterSwitch" />
                                  <label for="heaterSwitch"></label>
                                </div>
                                </td>                               
                               </tr>
                              <tr>
                                <td>Fan</td>
                                <td><label class="switch"><input type="checkbox"><span class="slider round"></span></label></td>
                                <td></td>
                                <td><div class="toggle">
                                  <input type="checkbox" id="fanSwitch" />
                                  <label for="fanSwitch"></label>
                                </div>
                                </td>
                              </tr>
                              <tr>
                                <td>Start Date of Production</td>
                                <td></td>
                                <td></td>
                                <td>
                                  <input type="date" id="startDate" name="startDate">
                                </td>
                              </tr>
                            </tbody>


                            </table>
                          </div>
                        </div>
                        <div class="card-body">
                          <div class="table-responsive">
                            <table class="table tablesorter" id="environmentTable">
                              <thead class="text-primary">
                                <tr>
                                  <th>Parameter</th>
                                  <th>Value</th>
                                  <th>Ideal</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>Temperature</td>
                                  <td id="temperatureValue">Loading...</td>
                                  <td>28°</td>
                                </tr>
                                <tr>
                                  <td>Humidity</td>
                                  <td id="humidityValue">Loading...</td>
                                  <td>60%</td>
                                </tr>
                                <tr>
                                  <td>CO2</td>
                                  <td id="co2Value">Loading...</td>
                                  <td>440PPM</td>
                                </tr>
                                <tr>
                                  <td>NH3</td>
                                  <td id="nh3Value">Loading...</td>
                                  <td>19PPM</td>
                                </tr>
                                <tr>
                                  <td>Dust</td>
                                  <td id="dustValue">Loading...</td>
                                  <td>20</td>
                                </tr>
                                <tr>
                                  <td>Luminosity</td>
                                  <td id="luminosityValue">Loading...</td>
                                  <td>1000 LUX</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        
                      </div>
                    </div>
                  </div>
                </div>
                <!--  humidity data  -->

                <div class="content"  id="hum"  >
        
        
                  <div class="row">
                    <div class="col-12" >
                      <div class="card card-chart">
                        <div class="card-header ">
                          <div class="row">
                            <div class="col-sm-6 text-left">
                              <h5 class="card-category">POULTRY</h5>
                              <h5 class="card-title"><h2 style="
                                width: 685px;
                            "> Settings Value <label for="" style="
                                margin-left: 50px;
                            ">history Day :<input type="date" name="" id="datehum"></label> </h2> 
                                 </h5>
                            </div>
                            <div class="col-sm-6">
                              <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                                <label class="btn btn-sm btn-primary btn-simple active" id="4">
                                  <input type="radio" name="options" checked>
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">5min</span>
                                  <span class="d-block d-sm-none">
                                    <i>5MIN</i>
                                  </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="5">
                                  <input type="radio" class="d-none d-sm-none" name="options">
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">day</span>
                                  <span class="d-block d-sm-none">
<i>1H</i>                                  </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="6">
                                  <input type="radio" class="d-none" name="options">
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">week</span>
                                  <span class="d-block d-sm-none">
                                    <i>1D</i>
                                  </span>
                                </label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- graphe 1 -->
                        <div class="card-body" style="width: 960px;">
                          
                          <!DOCTYPE html>
                          <html lang="en">
                          <head>
                              <meta charset="UTF-8">
                              <title>Sensor Dashboard</title>
                              <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                              <script src="https://cdn.jsdelivr.net/raphael/2.1.4/raphael-min.js"></script>
                              <script src="https://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js"></script>
                              <style>
                                  .chart-container {
                                      width: 400px;
                                      height: 200px;
                                      margin: 0px;
                                  }
                              </style>
                          </head>
                          <body>
                              <div class="gauge-display" style="display: flex;">
                                  <div class="chart-container">
                                      <canvas id="humidityChartt"></canvas>
                                  </div>
                                  <div class="chart-container">
                                      <div id="humidity--gauge"></div>
                                  </div>
                              </div>
                              <!-- Humidity table -->
                              <div class="col-md-12">
                                  <div class="card card-plain">
                                      <div class="card-header">
                                          <h4 class="card-title"> Humidity History Table </h4>
                                      </div>
                                      <div class="card-body">
                                          <div class="table-responsive">
                                              <table class="table">
                                                  <thead class="text-primary">
                                                      <tr>
                                                          <th>Date</th>
                                                          <th>HUMIDITY</th>
                                                      </tr>
                                                  </thead>
                                                  <tbody id="humidityHistory"></tbody>
                                              </table>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          
                              
          
          
                          </body>
                          </html>
                          
          
          
          
          
          
          
          
          
          
          
          
                        </div>
                        <!-- end graphe 1 -->
                      </div>
                    </div>
                  </div>
                  
                </div>
          
          
                  <!--  air quality data  -->
                  <div class="content" id="air" >
                  
                  
                    <div class="row">
                      <div class="col-12" >
                        <div class="card card-chart">
                          <div class="card-header ">
                            <div class="row">
                              <div class="col-sm-6 text-left">
                                <h5 class="card-category">POULTRY</h5>
                                <h5 class="card-title"><h2 style="
                                  width: 685px;
                              "> Settings Value <label for="" style="
                                  margin-left: 50px;
                              ">history Day :<input type="date" name="" id="dateair"></label> </h2> 
                                   </h5>
                              </div>
                              <div class="col-sm-6">
                                <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                                    <label class="btn btn-sm btn-primary btn-simple active" id="btn5min">
                                      <input type="radio" name="options" checked>
                                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">5min</span>
                                      <span class="d-block d-sm-none">
                                        <i>5MIN</i>
                                      </span>
                                    </label>
                                    <label class="btn btn-sm btn-primary btn-simple" id="btnDay">
                                      <input type="radio" class="d-none d-sm-none" name="options">
                                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">day</span>
                                      <span class="d-block d-sm-none">
    <i>1H</i>                                      </span>
                                    </label>
                                    <label class="btn btn-sm btn-primary btn-simple" id="btnWeek">
                                      <input type="radio" class="d-none" name="options">
                                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">week</span>
                                      <span class="d-block d-sm-none">
                                        <i>1D</i>
                                      </span>
                                    </label>
                                </div>
                            </div>
                            
                            </div>
                          </div>
                          <!-- graphe 1 -->
                          <div class="card-body" style="width: 960px;">
                            
                            <!DOCTYPE html>
                            <html lang="en">
                            <head>
                                <meta charset="UTF-8">
                                <title>Sensor Dashboard - CO2 and NH3</title>
                                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                                <script src="https://cdn.jsdelivr.net/raphael/2.1.4/raphael-min.js"></script>
                                <script src="https://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js"></script>
                                <style>
                                    .chart-container {
                                        width: 500px; /* Adjust size as needed */
                                        height: 250px; /* Adjust size as needed */
                                        margin: 0px;
                                    }
                                </style>
                            </head>
                            <body>
                                <div class="gauge-display" style="display: flex;">
                                    
                                    <div class="chart-container">
                                        <div id="co2--gauge"></div>
                                    </div>
                                    <div class="chart-container">
                                      <div id="dust-Gauge"></div>
                                  </div>
                                    <div class="chart-container">
                                      <div id="nh3--gauge"></div>
                                  </div>
                                   
                                    
                                </div>
                              <div class="gauge-display" style="display: flex;">
                                  <div class="chart-container"   >
                                    <canvas id="co2Chart"></canvas>
                                </div>
                                  
                                  <div class="chart-container"   >
                                      <canvas id="nh3Chart"></canvas>
                                  </div>
                                  
                                  
                              </div>
                              <div class="gauge-display" style="display: flex; padding-left: 23%;" >
                                
                                
                                <div class="chart-container"  >
                                  <canvas id="dustChart"></canvas>
                              </div>
                                
                                
                            </div>
                           
                              
                            </body>
                            </html>
                            
            
            
            
            
            
            
            
            
            
            
                          </div>
                          
                          <div class="col-md-12"  style="display: flex;">
                            
                            <div class="card  card-plain" style=" text-align: center;">
                              <div class="card-header" >
                                <h4 class="card-title" > date</h4>
                                
                              </div>
                              <div class="card-body" >
                                <div class="table-responsive">
                                  <table class="table">
                                    <thead class=" text-primary">
                                      <tr>
                                        <th>Date</th>
                                      </tr>
                                    </thead>
                                    <tbody id="date"></tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                            <div class="card  card-plain" style=" text-align: center;">
                              <div class="card-header">
                                <h4 class="card-title"> CO2 history </h4>
                                
                              </div>
                              <div class="card-body">
                                <div class="table-responsive">
                                  <table class="table">
                                    <thead class=" text-primary">
                                      <tr>
                                        <th>CO2</th>
                                      </tr>
                                    </thead>
                                    <tbody id="co2History"></tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                            <div class="card  card-plain" style=" text-align: center;" >
                              <div class="card-header" >
                                <h4 class="card-title" > NH3 history </h4>
                                
                              </div>
                              <div class="card-body"  >
                                <div class="table-responsive">
                                  <table class="table">
                                    <thead class=" text-primary">
                                      <tr>
                                        <th>NH3</th>
                                      </tr>
                                    </thead>
                                    <tbody id="NH3History"></tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                            <div class="card  card-plain" style=" text-align: center;" >
                              <div class="card-header" style=" text-align: center;">
                                <h4 class="card-title" > duty history </h4>
                                
                              </div>
                              <div class="card-body"  >
                                <div class="table-responsive">
                                  <table class="table">
                                    <thead class=" text-primary">
                                      <tr>
                                        <th>dust</th>
                                      </tr>
                                    </thead>
                                    <tbody id="dustHistory"></tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-12"  style="display: flex;">
                            
                            
                          </div>
                          
           
            
                          
                        </div>
                      </div>
                    </div>
                    
                  </div>
          
                   <!--  fourrage data  -->
          
                <div class="content " id="fourrage">
                  
                  
                  <div class="row">
                    <div class="col-12">
                      <div class="card card-chart">
                        <div class="card-header ">
                          <div class="row">
                            <div class="col-sm-6 text-left">
                              <h5 class="card-category">POULTRY</h5>
                              <h2 class="card-title">Settings Value</h2>
                            </div>
                            <div class="col-sm-6">
                              <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                                <label class="btn btn-sm btn-primary btn-simple active" id="13">
                                  <input type="radio" name="options" checked>
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">5min</span>
                                  <span class="d-block d-sm-none">
                                    <i>5MIN</i>
                                  </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="14">
                                  <input type="radio" class="d-none d-sm-none" name="options">
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">day</span>
                                  <span class="d-block d-sm-none">
<i>1H</i>                                  </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="15">
                                  <input type="radio" class="d-none" name="options">
                                  <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">week</span>
                                  <span class="d-block d-sm-none">
                                    <i>1D</i>
                                  </span>
                                </label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- graphe 1 -->
                        <div class="card-body" style="width: 930px;">
                          
                          <!DOCTYPE html>
                          <html lang="en">
                          <head>
                              <meta charset="UTF-8">
                              <title>Sensor Dashboard - Fourrage</title>
                              <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                              <script src="https://cdn.jsdelivr.net/raphael/2.1.4/raphael-min.js"></script>
                              <script src="https://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js"></script>
                              <style>
                                  .chart-container {
                                      width: 500px; /* Adjust size as needed */
                                      height: 250px; /* Adjust size as needed */
                                      margin: 0px;
                                  }
                              </style>
                          </head>
                          <body>
                              <div class="gauge-display" style="display: flex;">
                                  
                                <div class="chart-container" >
                                  <div id="feed-gauge" ></div>
                                </div>
                                <div class="chart-container" >
                                  <div id="water-gauge" ></div>
                                </div>
                                 
                                  
                              </div>
                           
                            
                            
                            
                          </body>
                          </html>
                          
          
          
          
          
          
          
          
          
          
          
                        </div>
                        
                        <div class="col-md-12"  style="display: flex;">
                          
                          <div class="card  card-plain" style=" text-align: center;">
                            <div class="card-header" >
                              <h4 class="card-title" > date</h4>
                              
                            </div>
                            <div class="card-body" style="padding-left: 10%;" >
                              <div class="table-responsive">
                                <table class="table">
                                  <thead class=" text-primary">
                                    <tr>
                                      <th>Date</th>
                                    </tr>
                                  </thead>
                                  <tbody id="Historry"></tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                          <div class="card  card-plain" style=" text-align: center;">
                            <div class="card-header">
                              <h4 class="card-title"> Fourrage history </h4>
                              
                            </div>
                            <div class="card-body">
                              <div class="table-responsive">
                                <table class="table">
                                  <thead class=" text-primary">
                                    <tr>
                                      <th>fourrage</th>
                                    </tr>
                                  </thead>
                                  <tbody id="fourrageHistory"></tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                          <div class="card  card-plain" style=" text-align: center;" >
                            <div class="card-header" >
                              <h4 class="card-title" > Eau history </h4>
                              
                            </div>
                            <div class="card-body" style="padding-left: 10%;" >
                              <div class="table-responsive">
                                <table class="table">
                                  <thead class=" text-primary">
                                    <tr>
                                      <th>eau</th>
                                    </tr>
                                  </thead>
                                  <tbody id="waterHistory"></tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                          
                        </div>
                        <div class="col-md-12"  style="display: flex;">
                          
                          
                        </div>
          
                        
                        
                      </div>
                    </div>
                  </div>
                  
                </div>


                
                

                <!--  user profile -->
           
          
                <div class="content" id="user" >
                  <div class="row">
                    <div class="col-md-8" style="left: 120px;">
                        
                         
                         
          
          <!DOCTYPE html>
          <html lang="en">
          <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Dark Mode Account Details Form</title>
          
            <style>
            
                 
                  .form-container {
                      background: #fff;
                      border-radius: 8px;
                      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                      overflow: hidden;
                      max-width: 300px;
                      margin: 0 auto;
                      padding: 25px;
                  }
                  .form-group {
                      margin-bottom: 20px;
                  }
                  .form-group label {
                      display: block;
                      margin-bottom: 5px;
                      font-weight: 400;
                      color: #34495e;
                  }
                  .form-group input[type='text'],
                  .form-group input[type='email'],
                  .form-group input[type='tel'],
                  .form-group input[type='date'] {
                      width: calc(100% - 20px);
                      padding: 10px;
                      border: 2px solid #bdc3c7;
                      border-radius: 4px;
                      font-size: 14px;
                      transition: border-color 0.3s;
                  }
                  .form-group input[type='text']:focus,
                  .form-group input[type='email']:focus,
                  .form-group input[type='tel']:focus,
                  .form-group input[type='date']:focus {
                      border-color: #3498db;
                      outline: none;
                  }
                  .button {
                      width: 100%;
                      padding: 15px;
                      border: none;
                      background-image: linear-gradient(45deg, #3498db, #8e44ad);
                      color: white;
                      font-size: 16px;
                      font-weight: 400;
                      border-radius: 4px;
                      cursor: pointer;
                      transition: background-image 0.3s;
                  }
                  .button:hover {
                      background-image: linear-gradient(45deg, #2980b9, #9b59b6);
                  }
                  .row {
                      display: flex;
                      justify-content: space-between;
                  }
                  .row > .form-group {
                      flex-basis: 48%;
                  }
              
          </style>
          </head>
          <body>
          
          
            <div class="container">
              <h2>Account Details</h2>
              <form id="accountForm">
                  <div class="form-group">
                      <label for="username" style="width: auto;">Username</label>
                      <input type="text" id="username" name="username" required style="width: 100%;">
                  </div>
                  <div class="row">
                      <div class="form-group">
                          <label for="firstName" style="width: auto;margin-left: 5%;">First name</label>
                          <input type="text" id="firstName" name="firstName" required style="width: 100%;margin-left: 5%;">
                      </div>
                      <div class="form-group">
                          <label for="lastName" style="width: auto;">Last name</label>
                          <input type="text" id="lastName" name="lastName" required style="width: 96%;">
                      </div>
                  </div>
                  <div class="row">
                      <div class="form-group">
                          <label for="orgName"  style="width: auto;margin-left: 5%;">Organization name</label>
                          <input type="text" id="orgName" name="orgName" style="width: 100%;margin-left: 5%;" disabled>
                      </div>
                      <div class="form-group" >
                          <label for="location" style="width: auto;">Location</label>
                          <input type="text" id="location" name="location" style="width: 96%;">
                      </div>
                  </div>
                  <div class="row">
                      <div class="form-group" >
                          <label for="email" style="width: auto;margin-left: 5%;">Email address</label>
                          <input type="email" id="email" name="email" required style="width: 100%;margin-left: 5%;">
                      </div>
                      <div class="form-group">
                          <label for="phone" style="width: auto;">Phone number</label>
                          <input type="tel" id="phone" name="phone" style="width: 96%;">
                      </div>
                  </div>
          
                  <button type="submit" class="button">Save changes</button>
              </form>
          </div>
          
          
          
          </body>
          </html>
          
                          
                        
                    </div>
                    
                  </div>
                </div>
               
            
            <!--  notification -->
          
                <div class="content" id="notif" >
                  <div class="row">
                    <div class="col-md-6 ml-auto mr-auto text-center">
                      <div class="card">
                        <div class="card-header">
                          <h4 class="card-title">Notifications </h4>
                        </div>
                        <div class="card-body">
                          <div id="notification-container"></div>
          
                          
                          
                        </div>
                      </div>
                    </div>
                    
                     
          
          
          
          
          
          
          
                    
                    
                  </div>
                </div>
        <!--  jauge data  -->

        <div class="content" id="dash" >
          <div class="row" style="width: 980px;" >
            <div class="col-12"  >
              <div class="card card-chart">
                <div class="card-header ">
                  <div class="row">
                    <div class="col-sm-6 text-left">
                      <h5 class="card-category">POULTRY</h5>
                      <h2 class="card-title">Sensor Dashboard</h2>
                    </div>
                  
                  </div>
                </div>
                <!-- graphe 1 -->
                <div class="card-body">
                  

                  <!DOCTYPE html>
                  <html lang="en">
                  <head>
                      <meta charset="UTF-8">
                      <meta name="viewport" content="width=device-width, initial-scale=1.0">
                      <title>Sensor Dashboard</title>
                      <script src="https://cdn.jsdelivr.net/raphael/2.1.4/raphael-min.js"></script>
                      <script src="https://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js"></script>
                      <style>
                          body {
                              font-family: Arial, sans-serif;
                              background-color: #222;
                              color: #fff;
                              display: flex;
                              justify-content: space-around;
                              align-items: center;
                              height: 100vh;
                              margin: 0;
                              display: inline-block;
                              
                          }
                          .chart-container {
                              width: 190px; /* Adjust size as needed */
                              height: 600px; /* Adjust size as needed */
                              margin: 0px;
                              
                              
                          } 
                          .gauge-display{
                            display: flex;
                          }
                           @media screen and(max-width:800px) {
                            body{
                              display: block;          
                            }
                            .gauge-display{
                              display: block;
                            }
                          }
                          
                      </style>
                  </head>
                  <body>
                    <div class="gauge-display" style="@media screen and(max-width:800px) {
                    
                      display: block;
                    
                  }"
                    >
                      <div class="chart-container">
                        <div id="temperature-gauge"></div>
                      </div>
                      <div class="chart-container">
                        <div id="humidity-gauge"></div>
                      </div>
                      <div class="chart-container">
                        <div id="nh3-gauge"></div>
                      </div>
                      <div class="chart-container">
                        <div id="co2-gauge"></div>
                      </div>
                      <div class="chart-container">
                        <div id="luminosity-gauge"></div>
                      </div>
                    
                      
                      
                    
                      
                      </body>
                      </html>












                </div>

              
                <div class="card-body">
                  

                  <!DOCTYPE html>
                  <html lang="en">
                  <head>
                      <meta charset="UTF-8">
                      <meta name="viewport" content="width=device-width, initial-scale=1.0">
                      <title>Sensor Dashboard</title>
                      <script src="https://cdn.jsdelivr.net/raphael/2.1.4/raphael-min.js"></script>
                      <script src="https://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js"></script>
                      <style>
                          
                          .chart-container {
                              width: 190px; /* Adjust size as needed */
                              height: 800px; /* Adjust size as needed */
                              margin: 0px;
                              
                              
                          } 
                          
                      </style>
                  </head>
                  <body>
                    <div class="gauge-display" style="display: flex;">
                      
                      <div class="chart-container" >
                        <div id="feed-level-gauge" ></div>
                      </div>
                      <div class="chart-container" >
                        <div id="water-level-gauge" ></div>
                      </div>
                      
                    
                      </body>
                      </html>












                </div>
                <!-- end graphe 1 -->
              </div>
            </div>
          </div>
        




          
        </div>

          <!--  temp and hum data chart -->

        <div class="col-12" id="dash" >
          <div class="card card-chart" >
            <div class="card-header ">
              <div class="row">
                <div class="col-sm-6 text-left">
                  <h5 class="card-category">POULTRY</h5>
                  <h2 class="card-title">Temperature and Humidity Charts</h2>
                </div>
                <div class="col-sm-6">
                  <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                    <label class="btn btn-sm btn-primary btn-simple active" id="16">
                      <input type="radio" name="options" checked>
                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">5min</span>
                      <span class="d-block d-sm-none">
                        <i>5MIN</i>
                      </span>
                    </label>
                    <label class="btn btn-sm btn-primary btn-simple" id="17">
                      <input type="radio" class="d-none d-sm-none" name="options">
                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">day</span>
                      <span class="d-block d-sm-none">
                        <i>1H</i>
                      </span>
                    </label>
                    <label class="btn btn-sm btn-primary btn-simple" id="18">
                      <input type="radio" class="d-none" name="options">
                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">week</span>
                      <span class="d-block d-sm-none">
                        <i>1D</i>
                      </span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <!-- graphe 1 -->
            <div class="card-body">
              
              <!DOCTYPE html>
              <html lang="en">
              <head>
                  <meta charset="UTF-8">
                  <title>Dynamic Temperature and Humidity Charts - Dark Theme</title>
                  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                  <style>
                      
                      .chart-container {
                          width:  48%;
                          height: 250px;
                          
                      }
                  </style>
              </head>
              <body>
                <div style="display: flex;  ">
                  <div class="chart-container" style=" margin-right: 1%; margin-left: 3%;">
                      <canvas id="temperatureChart" ></canvas>
                  </div>
                  <div class="chart-container">
                      <canvas id="humidityChart"></canvas>
                  </div>
                </div>
                  <script>
                      
                    
                      function createChartConfig(label, minY, maxY, borderColor, backgroundColor) {
                          return {
                              type: 'line',
                              data: {
                                  labels: [],
                                  datasets: [{
                                      label: label,
                                      data: [],
                                      borderColor: borderColor,
                                      backgroundColor: backgroundColor,
                                      borderWidth: 2,
                                      fill: false
                                  }]
                              },
                              options: {
                                  scales: {
                                      x: {
                                          ticks: {
                                              color: '#E0E0E0'
                                          }
                                      },
                                      y: {
                                          beginAtZero: false,
                                          min: minY,
                                          max: maxY,
                                          ticks: {
                                              color: '#E0E0E0'
                                          }
                                      }
                                  },
                                  plugins: {
                                      legend: {
                                          labels: {
                                              color: '#E0E0E0'
                                          }
                                      }
                                  },
                                  maintainAspectRatio: false,
                              }
                          };
                      }
              
                      
              
                  </script>
              </body>
              </html>
              












            </div>
          
          </div>
        </div>


          <!--  co2 and nh3 data chart -->

        <div class="col-12"  id="dash"  >
          <div class="card card-chart">
            <div class="card-header ">
              <div class="row">
                <div class="col-sm-6 text-left">
                  <h5 class="card-category">POULTRY</h5>
                  <h2 class="card-title">CO2 and NH3 Data Chart</h2>
                </div>
                <div class="col-sm-6">
                  <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                    <label class="btn btn-sm btn-primary btn-simple active" id="10">
                      <input type="radio" name="options" checked>
                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">5min</span>
                      <span class="d-block d-sm-none">
                        <i>5MIN</i>
                      </span>
                    </label>
                    <label class="btn btn-sm btn-primary btn-simple" id="11">
                      <input type="radio" class="d-none d-sm-none" name="options">
                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">day</span>
                      <span class="d-block d-sm-none">
                        <i>1H</i>
                      </span>
                    </label>
                    <label class="btn btn-sm btn-primary btn-simple" id="12">
                      <input type="radio" class="d-none" name="options">
                      <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">week</span>
                      <span class="d-block d-sm-none">
                        <i>1D</i>
                      </span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <!-- graphe 3 -->
            <div class="card-body">
              <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <title>Dynamic CO2 and NH3 Data Chart - Dark Theme</title>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      <style>
        
          
          canvas {
              width: 100% !important;
              height: 100% !important;
              box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* Optional: Adds shadow for better contrast */
          }
      </style>
  </head>
  <body>
      <div class="chart-container" style="width: 80%; margin-left: 10%;">
        <canvas id="gasChart" width="400" height="200" style="display: block; margin: auto;"></canvas>
      </div>
      
  </body>
  </html>












            </div>
                

          </div>
        </div>


      </div>

      
    
      

    
     
      
      <!--  footer -->
     
      <footer class="footer">
        <div class="container-fluid">
          <ul class="nav">
            <li class="nav-item">
              <a href="javascript:void(0)" class="nav-link">
                Creative Tim
              </a>
            </li>
            <li class="nav-item">
              <a href="javascript:void(0)" class="nav-link">
                About Us
              </a>
            </li>
            <li class="nav-item">
              <a href="javascript:void(0)" class="nav-link">
                Blog
              </a>
            </li>
          </ul>
          <div class="copyright">
            ©
            <script>
              document.write(new Date().getFullYear())
            </script>2024 made with FEDI SG <i class="tim-icons icon-heart-2"></i> by
            <a href="javascript:void(0)" target="_blank">Creative Tim</a> for a better web.
          </div>
        </div>
      </footer>
    </div>
  </div>

  <div class="fixed-plugin" >
    <div class="dropdown show-dropdown">
      <a href="#" data-toggle="dropdown">
        <i class="fa fa-cog fa-2x"> </i>
      </a>
      <ul class="dropdown-menu">
        <li class="header-title"> Sidebar Background</li>
        <li class="adjustments-line">
          <a href="javascript:void(0)" class="switch-trigger background-color">
            <div class="badge-colors text-center">
              <span class="badge filter badge-primary active" data-color="primary"></span>
              <span class="badge filter badge-info" data-color="blue"></span>
              <span class="badge filter badge-success" data-color="green"></span>
            </div>
            <div class="clearfix"></div>
          </a>
        </li>
        <li class="adjustments-line text-center color-change">
          <span class="color-label">LIGHT MODE</span>
          <span class="badge light-badge mr-2"></span>
          <span class="badge dark-badge ml-2"></span>
          <span class="color-label">DARK MODE</span>
        </li>
       
       
      </ul>
    </div>
  </div>
  <!--   Core JS Files   -->

  <script src="assets/js/core/jquery.min.js"></script>
  <script src="assets/js/core/popper.min.js"></script>
  <script src="assets/js/core/bootstrap.min.js"></script>
  <script src="assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>

  <!--  Google Maps Plugin    -->
  <!-- Place this tag in your head or just before your close body tag. -->
  <!-- Chart JS -->
  <script src="assets/js/plugins/chartjs.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Black Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="assets/js/black-dashboard.min.js?v=1.0.0"></script><!-- Black Dashboard DEMO methods, don't include it in your project! -->
  <script src="assets/demo/demo.js"></script>


  <script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>

  <script>
    $(document).ready(function() {
      $().ready(function() {
        $sidebar = $('.sidebar');
        $navbar = $('.navbar');
        $main_panel = $('.main-panel');

        $full_page = $('.full-page');

        $sidebar_responsive = $('body > .navbar-collapse');
        sidebar_mini_active = true;
        white_color = false;

        window_width = $(window).width();

        fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();



        $('.fixed-plugin a').click(function(event) {
          if ($(this).hasClass('switch-trigger')) {
            if (event.stopPropagation) {
              event.stopPropagation();
            } else if (window.event) {
              window.event.cancelBubble = true;
            }
          }
        });

        $('.fixed-plugin .background-color span').click(function() {
          $(this).siblings().removeClass('active');
          $(this).addClass('active');

          var new_color = $(this).data('color');

          if ($sidebar.length != 0) {
            $sidebar.attr('data', new_color);
          }

          if ($main_panel.length != 0) {
            $main_panel.attr('data', new_color);
          }

          if ($full_page.length != 0) {
            $full_page.attr('filter-color', new_color);
          }

          if ($sidebar_responsive.length != 0) {
            $sidebar_responsive.attr('data', new_color);
          }
        });

        $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (sidebar_mini_active == true) {
            $('body').removeClass('sidebar-mini');
            sidebar_mini_active = false;
            blackDashboard.showSidebarMessage('Sidebar mini deactivated...');
          } else {
            $('body').addClass('sidebar-mini');
            sidebar_mini_active = true;
            blackDashboard.showSidebarMessage('Sidebar mini activated...');
          }

          // we simulate the window Resize so the charts will get updated in realtime.
          var simulateWindowResize = setInterval(function() {
            window.dispatchEvent(new Event('resize'));
          }, 180);

          // we stop the simulation of Window Resize after the animations are completed
          setTimeout(function() {
            clearInterval(simulateWindowResize);
          }, 1000);
        });

        $('.switch-change-color input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (white_color == true) {

            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').removeClass('white-content');
            }, 900);
            white_color = false;
          } else {

            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').addClass('white-content');
            }, 900);

            white_color = true;
          }


        });

        $('.light-badge').click(function() {
          $('body').addClass('white-content');
        });

        $('.dark-badge').click(function() {
          $('body').removeClass('white-content');
        });
      });
    });
  </script>

  <script>
    window.TrackJS &&
      TrackJS.install({
        token: "ee6fab19c5a04ac1a32a645abde4613a",
        application: "black-dashboard-free"
      });
  </script>
 

<script>
  // Temperature Gauge
  var tempGauge = new JustGage({
      id: 'temperature-gauge',
      value: 22,
      min: -10,
      max: 50,
      title: "Temperature",
      label: "°C",
      gaugeWidthScale: 0.6,
      levelColors: ["#3498db"],
      valueFontColor: "#E0E0E0", // Set value color to white
      titleFontColor: "#E0E0E0", // Set title color to white
      labelFontColor: "#E0E0E0", // Set label color to white
  });
  var humidityGaug = new JustGage({
      id: 'humidity--gauge',
      value: 78, // Replace with your sensor value
      min: 0,
      max: 100,
      title: "Humidity",
      label: "percent",
      gaugeWidthScale: 0.6,
      levelColors: ["#00fff6", "#ff00fc", "#d300ff"],
      valueFontColor: "#E0E0E0",
      titleFontColor: "#E0E0E0",
      labelFontColor: "#E0E0E0",
  });

    // Temperature Gauge
  var tempGaug = new JustGage({
      id: 'temperature--gauge',
      value: 22,
      min: -10,
      max: 50,
      title: "Temperature",
      label: "°C",
      gaugeWidthScale: 0.6,
      levelColors: ["#3498db"],
      valueFontColor: "#E0E0E0", // Set value color to white
      titleFontColor: "#E0E0E0", // Set title color to white
      labelFontColor: "#E0E0E0", // Set label color to white
  });
  var humidityGauge = new JustGage({
      id: 'humidity-gauge',
      value: 78, // Replace with your sensor value
      min: 0,
      max: 100,
      title: "Humidity",
      label: "percent",
      gaugeWidthScale: 0.6,
      levelColors: ["#00fff6", "#ff00fc", "#d300ff"],
      valueFontColor: "#E0E0E0",
      titleFontColor: "#E0E0E0",
      labelFontColor: "#E0E0E0",
  });

  // NH3 Gauge
  var nh3Gauge = new JustGage({
      id: 'nh3-gauge',
      value: 5,
      min: 0,
      max: 100,
      title: "NH3",
      label: "ppm",
      gaugeWidthScale: 0.6,
      levelColors: ["#2ecc71"],
      valueFontColor: "#E0E0E0", // Set value color to white
      titleFontColor: "#E0E0E0", // Set title color to white
      labelFontColor: "#E0E0E0", // Set label color to white
  });

  // CO2 Gauge
  var co2Gauge = new JustGage({
      id: 'co2-gauge',
      value: 400,
      min: 0,
      max: 3000,
      title: "CO2",
      label: "ppm",
      gaugeWidthScale: 0.6,
      levelColors: ["#e74c3c"],
      valueFontColor: "#E0E0E0", // Set value color to white
      titleFontColor: "#E0E0E0", // Set title color to white
      labelFontColor: "#E0E0E0", // Set label color to white
  });
  // NH3 Gauge
 
  // Luminosity Gauge
  var luminosityGauge = new JustGage({
      id: 'luminosity-gauge',
      value: 750,
      min: 0,
      max: 2000,
      title: "Luminosity",
      label: "lux",
      gaugeWidthScale: 0.6,
      levelColors: ["#f1c40f"],
      valueFontColor: "#E0E0E0", // Set value color to white
      titleFontColor: "#E0E0E0", // Set title color to white
      labelFontColor: "#E0E0E0", // Set label color to white
  });
  
</script>
<script src="lux.js"></script>
<script src="temp.js"></script>
<script src="hum.js"></script>
<script src="air.js"></script>
<script src="gaz.js"></script>
<script src="initial.js"></script>






<script>
  // Initialiser la jauge du niveau d'eau
  var waterLevelGauge = new JustGage({
      id: "water-level-gauge",
      value: 0,
      min: 0,
      max: 100,
      title: "Niveau d'Eau",
      label: "%",
      gaugeWidthScale: 0.6,
      levelColors: ["#3498db"],
      valueFontColor: "#E0E0E0",
      titleFontColor: "#E0E0E0",
      labelFontColor: "#E0E0E0",
  });
  var waterGauge = new JustGage({
      id: "water-gauge",
      value: 0,
      min: 0,
      max: 100,
      title: "Niveau d'Eau",
      label: "%",
      gaugeWidthScale: 0.6,
      levelColors: ["#3498db"],
      valueFontColor: "#E0E0E0",
      titleFontColor: "#E0E0E0",
      labelFontColor: "#E0E0E0",
  });

  function fetchEmail() {
    return fetch('http://localhost:3000/get-email')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            return data.email; // Assuming the API returns an object with an 'email' property
        })
        .catch(error => {
            console.error('Failed to fetch:', error);
            throw error; // Re-throw to be handled by the caller
        });
}
async function fetchOrganizationName(email) {
  try {
    const response = await fetch(`http://localhost:3000/api/organization-name/${email}`);
    const data = await response.json();
    return data.organizationName;

  } catch (error) {
    console.error('Error:', error);
  }
}
  // Fonction pour récupérer le niveau d'eau de l'API
  async function getWater() {
    const userEmail = await fetchEmail();
    const organizationName = await fetchOrganizationName(userEmail);
      try {

          const response = await fetch(`http://localhost:3000/api/water/${organizationName}`);
          if (!response.ok) {
              throw new Error('Network response was not ok for water');
          }
          const data = await response.json();
          return data.water;

      } catch (error) {
          console.error("Could not fetch water level:", error);
          return null;
      }
  }


var m=0;

  // Fonction pour mettre à jour la jauge d'eau
  async function updateWaterGauge() {
      var water = await getWater();
      if (water !== null) {
          waterLevelGauge.refresh(water);
          waterGauge.refresh(water);
         
  }}

  // Mettre à jour la jauge d'eau dès le chargement de la page et toutes les 5 secondes
  setInterval(updateWaterGauge, 5000);
</script>
<script>
  // Initialiser la jauge du niveau de fourrage
  var feedLevelGauge = new JustGage({
      id: "feed-level-gauge",
      value: 0,
      min: 0,
      max: 100,
      title: "Niveau de Fourrage",
      label: "%",
      gaugeWidthScale: 0.6,
      levelColors: ["#3498db"],
      valueFontColor: "#E0E0E0",
      titleFontColor: "#E0E0E0",
      labelFontColor: "#E0E0E0",
  });
    // Initialiser la jauge du niveau de fourrage
    var feedGauge = new JustGage({
      id: "feed-gauge",
      value: 0,
      min: 0,
      max: 100,
      title: "Niveau de Fourrage",
      label: "%",
      gaugeWidthScale: 0.6,
      levelColors: ["#3498db"],
      valueFontColor: "#E0E0E0",
      titleFontColor: "#E0E0E0",
      labelFontColor: "#E0E0E0",
  });

  function fetchEmail() {
    return fetch('http://localhost:3000/get-email')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            return data.email; // Assuming the API returns an object with an 'email' property
        })
        .catch(error => {
            console.error('Failed to fetch:', error);
            throw error; // Re-throw to be handled by the caller
        });
}
async function fetchOrganizationName(email) {
  try {
    const response = await fetch(`http://localhost:3000/api/organization-name/${email}`);
    const data = await response.json();
    return data.organizationName;

  } catch (error) {
    console.error('Error:', error);
  }
}
  // Fonction pour récupérer le niveau de nourriture de l'API
  async function getFooder() {
      try {
        const userEmail = await fetchEmail();
  const organizationName = await fetchOrganizationName(userEmail);
          const response = await fetch(`http://localhost:3000/api/fooder/${organizationName}`);
          if (!response.ok) {
              throw new Error('Network response was not ok for fooder');
          }
          const data = await response.json();
          return data;
      } catch (error) {
          console.error("Could not fetch fooder level:", error);
          return null;
      }
  }
  // Fonction pour mettre à jour la jauge de nourriture
  async function updateFeederGauge() {
      var food = await getFooder();
      if (food !== null) {
          feedLevelGauge.refresh(food.fooder);
          feedGauge.refresh(food.fooder);
      }
  }
  

  

  // Mettre à jour la jauge de nourriture dès le chargement de la page et toutes les 5 secondes
  setInterval(updateFeederGauge, 5000);
</script>


<script>
                              

                            async  function fetchEmailll() {
    return fetch('http://localhost:3000/get-email')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            return data.email; // Assuming the API returns an object with an 'email' property
        })
        .catch(error => {
            console.error('Failed to fetch:', error);
            throw error; // Re-throw to be handled by the caller
        });
}
async function fetcheOrganizationName(email) {
  try {
    const response = await fetch(`http://localhost:3000/api/organization-name/${email}`);
    const data = await response.json();
    return data.organizationName;

  } catch (error) {
    console.error('Error:', error);
  }
}
  // Fonction pour récupérer le niveau d'eau de l'API
  async function getWater() {
      try {
        const userEmail = await fetchEmailll();
  const organizationName = await fetcheOrganizationName(userEmail);
          const response = await fetch(`http://localhost:3000/api/water/${organizationName}`);
          if (!response.ok) {
              throw new Error('Network response was not ok for water');
          }
          const data = await response.json();
          return data.water;
          
      } catch (error) {
          console.error("Could not fetch water level:", error);
          return null;
      }

      if (data.water < 20) {
  const notificationId = 'w';

  function fetchEmail() {
    return fetch('http://localhost:3000/get-email')
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => data.email) // Assuming the API returns an object with an 'email' property
      .catch(error => {
        console.error('Failed to fetch:', error);
        throw error; // Re-throw to be handled by the caller
      });
  }

  // Check if the notification exists
  fetch(`http://localhost:3000/api/check-notification/${email}/${notificationId}`)
    .then(response => response.json())
    .then(result => {
      if (!result.exists) {
        fetchEmail().then(email => {
          const formWaterData = {
            email: email,
            date: new Date(),
            message: 'water level reached less than 20%',
            read: false,
            id: 'w'
          };

          // Create a new notification
          return fetch('http://localhost:3000/api/newnotification', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(formWaterData)
          });
        })
        .then(response => {
          if (!response.ok) {
            throw new Error(`Network response was not ok: ${response.statusText}`);
          }
          return response.text();
        })
        .then(data => {
          showNotification('top', 'center', 'water level reached less than 20%');
          
        })
        .catch(error => {
          console.error('Failed to create notification:', error);
        });
      } 
    })
    .catch(error => {
      console.error('Failed to check notification existence:', error);
    });
}


  }
  
  
  // Fonction pour mettre à jour la jauge d'eau
  async function updateWaterGauge() {
      var water = await getWater();
      if (water !== null) {
          updatewaterTable(water);
      }
  }
  let waterHistory = [];
  
  function updatewaterTable(temperature) {
  
  // Ajoute la nouvelle TEMPERATURE au début du tableau
  waterHistory.unshift({ temperature });
  
  // Limite le tableau à 10 entrées
  if (waterHistory.length > 10) waterHistory.length = 10; // Garde uniquement les 10 premières entrées
  
  // Sélectionne l'élément du DOM pour le tableau historique
  let tableBody = document.getElementById('waterHistory');
  
  // Réinitialise le contenu du tableau
  tableBody.innerHTML = '';
  
  // Remplit le tableau avec les nouvelles données
  waterHistory.forEach(entry => {
    let row = `<tr>
                  <td>${entry.temperature} %</td>
                </tr>`;
    tableBody.innerHTML += row; // Ajoute la nouvelle entrée en haut du tableau
  });
  }

  
  // Mettre à jour la jauge d'eau dès le chargement de la page et toutes les 5 secondes
  setInterval(updateWaterGauge, 5000);
  
  </script>
  
  <script>
  
  
function fetchEmail() {
    return fetch('http://localhost:3000/get-email')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            return data.email; // Assuming the API returns an object with an 'email' property
        })
        .catch(error => {
            console.error('Failed to fetch:', error);
            throw error; // Re-throw to be handled by the caller
        });
}
async function fetchOrganizationName(email) {
  try {
    const response = await fetch(`http://localhost:3000/api/organization-name/${email}`);
    const data = await response.json();
    return data.organizationName;

  } catch (error) {
    console.error('Error:', error);
  }
}
  // Fonction pour récupérer le niveau de nourriture et la date de l'API
  async function getFooder() {
      try {
        const userEmail = await fetchEmail();
  const organizationName = await fetchOrganizationName(userEmail);
          const response = await fetch(`http://localhost:3000/api/fooder/${organizationName}`);
          if (!response.ok) {
              throw new Error('Network response was not ok for fooder');
          }
          const data = await response.json();
          // Assurez-vous que 'data' contient les champs 'fooder' et 'date'
          return {
            fooder: data.fooder, // Niveau de nourriture
            date: data.date // Date de la mesure
          };
      } catch (error) {
          console.error("Could not fetch fooder level:", error);
          return null; // Ou vous pourriez retourner un objet avec des valeurs par défaut
      }
  }
   // Fonction pour mettre à jour la jauge de nourriture
   async function updateFeederGauge() {
        var food = await getFooder();
        if (food !== null) {
            upddateTable(food.fooder);
            updatedateeTable(food.date);
  
        }

        if (food.fooder < 20) {
  const notificationId = 'f';

  function fetchEmail() {
    return fetch('http://localhost:3000/get-email')
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => data.email) // Assuming the API returns an object with an 'email' property
      .catch(error => {
        console.error('Failed to fetch:', error);
        throw error; // Re-throw to be handled by the caller
      });
  }

  // Check if the notification exists
  fetch(`http://localhost:3000/api/check-notification/${email}/${notificationId}`)
    .then(response => response.json())
    .then(result => {
      if (!result.exists) {
        fetchEmail().then(email => {
          const formFoodData = {
            email: email,
            date: new Date(),
            message: 'fooder level reached less than 20%',
            read: false,
            id: 'f'
          };

          // Create a new notification
          return fetch('http://localhost:3000/api/newnotification', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(formFoodData)
          });
        })
        .then(response => {
          if (!response.ok) {
            throw new Error(`Network response was not ok: ${response.statusText}`);
          }
          return response.text();
        })
        .then(data => {
          showNotification('top', 'center', 'fooder level reached less than 20%');
          
        })
        .catch(error => {
          console.error('Failed to create notification:', error);
        });
      } 
    })
    .catch(error => {
      console.error('Failed to check notification existence:', error);
    });
}
       }    let fooderHistory = [];
    let Historyy = [];
    function updatedateeTable(temperature) {
    // Ajoute la nouvelle TEMPERATURE au début du tableau
    Historyy.unshift({ temperature });
    
    // Limite le tableau à 10 entrées
    if (Historyy.length > 10) Historyy.length = 10; // Garde uniquement les 10 premières entrées
  
    // Sélectionne l'élément du DOM pour le tableau historique
    let tableeBody = document.getElementById('Historry');
    
    // Réinitialise le contenu du tableau
    tableeBody.innerHTML = '';
    
    // Remplit le tableau avec les nouvelles données
    Historyy.forEach(entry => {
      let row = `<tr>
                    <td>${entry.temperature} </td>
                  </tr>`;
      tableeBody.innerHTML += row; // Ajoute la nouvelle entrée en haut du tableau
    });
  }
    function upddateTable(temperature) {
    // Ajoute la nouvelle TEMPERATURE au début du tableau
    fooderHistory.unshift({ temperature });
    
    // Limite le tableau à 10 entrées
    if (fooderHistory.length > 10) fooderHistory.length = 10; // Garde uniquement les 10 premières entrées
  
    // Sélectionne l'élément du DOM pour le tableau historique
    let tableBodyy = document.getElementById('fourrageHistory');
    
    // Réinitialise le contenu du tableau
    tableBodyy.innerHTML = '';
    
    // Remplit le tableau avec les nouvelles données
    fooderHistory.forEach(entry => {
      let row = `<tr>
                    <td>${entry.temperature} %</td>
                  </tr>`;
      tableBodyy.innerHTML += row; // Ajoute la nouvelle entrée en haut du tableau
    });
  }

   
  
    // Mettre à jour la jauge de nourriture dès le chargement de la page et toutes les 5 secondes
    setInterval(updateFeederGauge, 5000);
  </script>




<script>
     function showNotification(from, align ,mess) {
    $.notify({
      icon: "tim-icons icon-bell-55",
      message: mess
    }, {
      type: type[4],
      timer: 8000,
      placement: {
        from: from,
        align: align
      }
    });
  }
</script>
<!--script notification -->
<script>
  function fetchEmail() {
    fetch('http://localhost:3000/get-email')
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        // Now fetch user details after successfully fetching the email
        fetchUserDetails(data.email);
      })
      .catch(error => {
        console.error('Failed to fetch:', error);
      });
  }
  
  function fetchUserDetails(email) {
    if (!email) {
      console.error('No email provided for fetching user details');
      return; // Exit if no email is available
    }
    fetch(`http://localhost:3000/api/users/${email}`)
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to fetch user details');
        }
        return response.json();
      })
      .then(user => {
        fillFormData(user);
      })
      .catch(error => {
        console.error('Error:', error);
      });
  }
  
  function fillFormData(userData) {
    // Assurez-vous que les ID des éléments correspondent à ceux dans votre HTML
    document.getElementById('username').value = userData.username || '';
    document.getElementById('location').value = userData.location || '';
    document.getElementById('email').value = userData.email || '';
    document.getElementById('phone').value = userData.phoneNumber || ''; 
    document.getElementById('orgName').value = userData.organizationName || ''; 
    document.getElementById('firstName').value = userData.firstName || ''; 
    document.getElementById('lastName').value = userData.lastName || ''; 
  }
  
  document.addEventListener('DOMContentLoaded', fetchEmail);
</script>


<script>
  document.addEventListener('DOMContentLoaded', function () {
  // Buttons
  const dashboardBtn = document.getElementById('dashboardLink');
  const temperatureBtn = document.getElementById('temperatureLink');
  const humidityBtn = document.getElementById('humidityLink');
  const airQualityBtn = document.getElementById('airLink');
  const forageBtn = document.getElementById('fourrageLink');
  const notificationsBtn = document.getElementById('notifLink');
  const userProfileBtn = document.getElementById('userProfileLink');
  const commandBtn = document.getElementById('commandLink');

  

  // Content divs
  const dashboardContent = document.getElementById('dash');
  const temperatureContent = document.getElementById('temp');
  const humidityContent = document.getElementById('hum');
  const airQualityContent = document.getElementById('air');
  const forageContent = document.getElementById('fourrage');
  const notificationsContent = document.getElementById('notif');
  const userProfileContent = document.getElementById('user');
  const commandContent = document.getElementById('command');

  // Array of all content divs for easy iteration
  const allContents = [dashboardContent, temperatureContent, humidityContent, airQualityContent, forageContent, notificationsContent, userProfileContent,commandContent];

  // Function to show only the relevant div
  const showOnlyOne = (contentToShow) => {
    allContents.forEach((contentDiv) => {
      if (contentDiv === contentToShow) {
        contentDiv.style.display = 'block';
      } else {
        contentDiv.style.display = 'none';
      }
    });
  };

  // Event listeners for each button
  dashboardBtn.addEventListener('click', () => showOnlyOne(dashboardContent));
  temperatureBtn.addEventListener('click', () => showOnlyOne(temperatureContent));
  humidityBtn.addEventListener('click', () => showOnlyOne(humidityContent));
  airQualityBtn.addEventListener('click', () => showOnlyOne(airQualityContent));
  forageBtn.addEventListener('click', () => showOnlyOne(forageContent));
  notificationsBtn.addEventListener('click', () => showOnlyOne(notificationsContent));
  userProfileBtn.addEventListener('click', () => showOnlyOne(userProfileContent));
  commandBtn.addEventListener('click', () => showOnlyOne(commandContent));


  // Initially display the dashboard content
  showOnlyOne(dashboardContent);
});

</script>
  

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var toggleButtons = document.querySelectorAll('.btn-toggle');

    toggleButtons.forEach(function(button) {
      button.addEventListener('click', function() {
        var state = button.getAttribute('data-state');
        if(state === 'off') {
          button.textContent = 'ON';
          button.setAttribute('data-state', 'on');
          // Add your code here to turn on the lamp/fan
        } else {
          button.textContent = 'OFF';
          button.setAttribute('data-state', 'off');
          // Add your code here to turn off the lamp/fan
        }
      });
    });
  });
</script>

<script>
  async function fetchAndDisplayNotifications() {
    try {
      const emailResponse = await fetch('http://localhost:3000/get-email');
      if (!emailResponse.ok) {
        throw new Error('Failed to fetch email');
      }
      const emailData = await emailResponse.json();
      const userEmail = encodeURIComponent(emailData.email); // URL-encode the email

      if (!userEmail) {
        console.error('Email is undefined or empty');
        return; // Exit if no email is fetched
      }

      const response = await fetch(`http://localhost:3000/api/notifications/${userEmail}`);
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }

      const notifications = await response.json();
      const container = document.getElementById('notification-container');
      container.innerHTML = '';

      notifications.forEach(notification => {
        const notificationElement = document.createElement('div');
        notificationElement.classList.add('alert', 'alert-info', 'alert-with-icon');
        notificationElement.setAttribute('data-notify', 'container');

        const closeButton = document.createElement('button');
        closeButton.setAttribute('type', 'button');
        closeButton.classList.add('close');
        closeButton.setAttribute('aria-label', 'Close');
        closeButton.innerHTML = '<i class="tim-icons icon-simple-remove"></i>';

        closeButton.addEventListener('click', async function() {
          try {
            // Delete request includes the userEmail for additional security
            await fetch(`http://localhost:3000/notifications/${userEmail}/${notification._id}`, {
              method: 'DELETE'
            });
            notificationElement.remove();
          } catch (error) {
            console.error('Failed to delete notification:', error);
          }
        });

        const iconSpan = document.createElement('span');
        iconSpan.classList.add('tim-icons', 'icon-bell-55');

        const messageSpan = document.createElement('span');
        messageSpan.textContent = notification.message;

        notificationElement.appendChild(closeButton);
        notificationElement.appendChild(iconSpan);
        notificationElement.appendChild(messageSpan);

        container.appendChild(notificationElement);
      });
    } catch (error) {
      console.error('Failed to fetch notifications:', error);
    }
  }

  fetchAndDisplayNotifications();
</script>





<script>
  async function fetchEnvironmentalData() {
    try {
      const response = await fetch('http://localhost:3000/api/environmental-data');
      if (!response.ok) {
        throw new Error('Failed to fetch environmental data');
      }
      const data = await response.json();
  
      document.getElementById('temperatureValue').textContent = `${data.temperature}°`;
      document.getElementById('humidityValue').textContent = `${data.humidity}%`;
      document.getElementById('co2Value').textContent = `${data.co2} PPM`;
      document.getElementById('nh3Value').textContent = `${data.nh3} PPM`;
      document.getElementById('dustValue').textContent = data.dust;
      document.getElementById('luminosityValue').textContent = `${data.luminosity} LUX`;
    } catch (error) {
      console.error('Failed to fetch and display data:', error);
    }
  }
  
  document.addEventListener('DOMContentLoaded', fetchEnvironmentalData);
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', async function () {
  // Obtenez l'email de l'utilisateur connecté et chargez les données initiales.
  const userEmail = await fetchEmail();
  const organizationName = await fetchOrganizationName(userEmail);
  loadInitialState(organizationName);

  // Ajoutez des écouteurs d'événements pour les boutons de basculement

  document.getElementById('autoSwitch').addEventListener('change', (event) => {
    const auto = document.getElementById('autoSwitch').checked;
    updateState('automatic', auto, organizationName);
  });
  document.getElementById('lampSwitch').addEventListener('change', (event) => {
    const lamp = document.getElementById('lampSwitch').checked;
    updateState('lampOn', lamp, organizationName);
  });
  document.getElementById('heaterSwitch').addEventListener('change', (event) => {
    const heater = document.getElementById('heaterSwitch').checked;
    updateState('heaterOn', heater, organizationName);
  });
  document.getElementById('fanSwitch').addEventListener('change', (event) => {
    const fan = document.getElementById('fanSwitch').checked;
    updateState('fanOn', fan, organizationName);
  });
  // Ajoutez un écouteur d'événements pour le champ de date
  document.getElementById('startDate').addEventListener('change', (event) => {
    const date = event.target.value;
    updateState('startDateOfProduction', date, organizationName);
  });
});

async function fetchEmail() {
    return fetch('http://localhost:3000/get-email')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            return data.email; // Assuming the API returns an object with an 'email' property
        })
        .catch(error => {
            console.error('Failed to fetch:', error);
            throw error; // Re-throw to be handled by the caller
        });
}

async function fetchOrganizationName(email) {
  try {
    const response = await fetch(`http://localhost:3000/api/organization-name/${email}`);
    const data = await response.json();
    return data.organizationName;

  } catch (error) {
    console.error('Error:', error);
  }
}

async function loadInitialState(organizationName) {
  try {
    const response = await fetch(`http://localhost:3000/api/get-latest-state/${organizationName}`);
    const data = await response.json();
    // Mettez à jour l'interface utilisateur avec les données récupérées
    document.getElementById('autoSwitch').checked = data.automatic;
    document.getElementById('lampSwitch').checked = data.lampOn;
    document.getElementById('fanSwitch').checked = data.fanOn;
    document.getElementById('startDate').value = data.startDateOfProduction.split('T')[0];
  } catch (error) {
    console.error('Error:', error);
  }
}

async function updateState(elementId, newState, organizationName) {
  try {
    const payload = {
      [elementId]: newState
    };
    await fetch(`http://localhost:3000/api/update-state/${organizationName}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
  } catch (error) {
    console.error('Error:', error);
  }
}

  </script>
<script>
  document.getElementById('accountForm').addEventListener('submit', async function(event) {
      event.preventDefault();
  
      const formData = {
          username: document.getElementById('username').value,
          firstName: document.getElementById('firstName').value,
          lastName: document.getElementById('lastName').value,
          location: document.getElementById('location').value,
          email: document.getElementById('email').value,
          phoneNumber: document.getElementById('phone').value
      };
  
      // Fetch the user's email; this function should already handle its own errors
      fetchEmail().then(userEmail => {
          fetch(`http://localhost:3000/api/update-user/${userEmail}`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(formData)
          })
          .then(response => {
              if (!response.ok) {
                  throw new Error('Failed to update account details');
              }
              return response.json();
          })
          .then(data => {
              alert('Account details updated successfully!');
          })
          .catch(error => {
              console.error('Error during update:', error);
              alert('Failed to update account details');
          });
      }).catch(error => {
          console.error('Error fetching email:', error);
          alert('Failed to fetch email, cannot update account');
      });
  });
  
  async function fetchEmail() {
      try {
          const response = await fetch('http://localhost:3000/get-email');
          if (!response.ok) {
              throw new Error('Network response was not ok');
          }
          const data = await response.json();
          return data.email; // Ensure that this is the correct path to the email in your API's response
      } catch (error) {
          console.error('Failed to fetch:', error);
          throw error; // Re-throw to be handled by the caller
      }
  }
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const startDateInput = document.getElementById('startDate');
      const temperatureIdeal = document.querySelector('#environmentTable tr:nth-child(1) td:nth-child(3)');
      const lightHoursIdeal = document.querySelector('#environmentTable tr:nth-child(6) td:nth-child(3)');
      const humidityIdeal = document.querySelector('#environmentTable tr:nth-child(2) td:nth-child(3)');
      const ventilationIdeal = document.querySelector('#environmentTable tr:nth-child(5) td:nth-child(3)');
  
      startDateInput.addEventListener('change', function() {
        updateIdealConditions(new Date(startDateInput.value));
      });
  
      function updateIdealConditions(startDate) {
        const now = new Date();
        const diffTime = Math.abs(now - startDate);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
  
        // Update Temperature based on days
        if (diffDays <= 4) {
          temperatureIdeal.textContent = '35°-32°';
        } else if (diffDays <= 7) {
          temperatureIdeal.textContent = '32°-30°';
        } else if (diffDays <= 14) {
          temperatureIdeal.textContent = '30°';
        } else if (diffDays <= 21) {
          temperatureIdeal.textContent = '28°';
        } else if (diffDays <= 28) {
          temperatureIdeal.textContent = '26°';
        } else {
          temperatureIdeal.textContent = '21°-18°';
        }
  
        // Update Light Hours based on days
        if (diffDays <= 7) {
          lightHoursIdeal.textContent = '23H';
        } else if (diffDays <= 21) {
          lightHoursIdeal.textContent = '20H';
        } else {
          lightHoursIdeal.textContent = '19H';
        }
  
        // Update Humidity based on weeks
        let weeks = Math.floor(diffDays / 7);
        if (weeks <= 3) {
          humidityIdeal.textContent = '55-60%';
        } else if (weeks == 4) {
          humidityIdeal.textContent = '55-65%';
        } else {
          humidityIdeal.textContent = '60-70%';
        }
  
        // Update Ventilation based on weeks
        if (weeks == 1) {
          ventilationIdeal.textContent = '0.16 m3/H';
        } else if (weeks == 2) {
          ventilationIdeal.textContent = '0.42 m3/H';
        } else if (weeks == 3) {
          ventilationIdeal.textContent = '0.59 m3/H';
        } else if (weeks == 4) {
          ventilationIdeal.textContent = '0.84 m3/H';
        } else if (weeks == 5) {
          ventilationIdeal.textContent = '0.93 m3/H';
        } else if (weeks > 5) {
          ventilationIdeal.textContent = '1.18 m3/H';
        }
      }
    });
  </script>
  <script>
          const tempDate = document.getElementById('datetemp');
          const humDate = document.getElementById('datehum');
          const AirDate = document.getElementById('dateair');
          async function initializeTemperatureChartWithDate(dateSelected) {
    const userEmail = await fetchEmail();
    const organizationName = await fetchOrganizationName(userEmail);
    const apiUrl = `http://localhost:3000/api/sensor-data-hourly/${dateSelected}/${organizationName}`;

    try {
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error('Failed to fetch data');
        
        const hourlyData = await response.json();

        if (!hourlyData.length) {
            alert('Aucune donnée trouvée pour cette date.');
            return;
        }

        const labels = hourlyData.map(data => `${data._id.hour}:00`);
        const temperatures = hourlyData.map(data => data.avgTemperature);

        temperatureChartt.data.labels = labels;
        temperatureChartt.data.datasets[0].data = temperatures;
        temperatureChartt.update();
    } catch (error) {
        console.error('Error initializing the chart:', error);
    }
}

document.getElementById('datetemp').addEventListener('change', async function() {
    const dateSelected = this.value;
    initializeTemperatureChartWithDate(dateSelected);
});

  </script>

</body>

</html>